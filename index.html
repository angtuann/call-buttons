<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Call Buttons (Auto)</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    input { padding: 12px; font-size: 16px; width: 320px; border:1px solid #ccc; border-radius:10px; }
    .buttons { margin-top: 20px; }
    a { display:inline-block; margin:6px; padding:12px 20px; border-radius:20px; text-decoration:none; font-weight:bold; color:white; }
    .phone { background:#34a853; } .facetime { background:#0b8043; }
    .whatsapp { background:#25d366; } .viber { background:#665cac; } .zalo { background:#0068ff; }
    .hint { color:#666; font-size:14px; margin-top:8px; }
  </style>
</head>
<body>
  <h2>Generate Call Buttons (Auto)</h2>
  <input id="phone" type="text" placeholder="Nh·∫≠p SƒêT" autocomplete="off" oninput="render(this.value)" />

  <div id="buttons" class="buttons"></div>

  <script>
    function normalizeNumber(num) {
      num = (num || "").trim();
      if (!num) return "";
      if (num.charAt(0) === "+") return num;

      // 10 s·ªë b·∫Øt ƒë·∫ßu 0 ‚Üí VN
      if (/^0\d{9}$/.test(num)) return "+84" + num.slice(1);

      // 11+ s·ªë b·∫Øt ƒë·∫ßu 0 ‚Üí ƒë·ªïi 0 th√†nh +
      if (/^0\d{10,}$/.test(num)) return "+" + num.slice(1);

      return num;
    }

    function render(raw) {
      var box = document.getElementById("buttons");
      var normalized = normalizeNumber(raw);
      if (!normalized) return;  // kh√¥ng xo√° k·∫øt qu·∫£ c≈© khi input r·ªóng

      var clean = normalized.replace("+", "");

      // Xo√° n·ªôi dung c≈©
      box.innerHTML = "";

      // Hi·ªÉn th·ªã s·ªë chu·∫©n ho√°
      var p = document.createElement("p");
      p.innerHTML = "<b>S·ªë chu·∫©n h√≥a:</b> " + normalized;
      box.appendChild(p);

      // Helper t·∫°o <a>
      function link(text, href, cls, newTab) {
        var a = document.createElement("a");
        a.className = cls;
        a.href = href;
        a.textContent = text;
        if (newTab) { a.target = "_blank"; a.rel = "noopener"; }
        box.appendChild(a);
      }

      link("üìû Phone", "tel:" + normalized, "phone", false);
      link("üéß FaceTime", "facetime-audio:" + normalized, "facetime", false);
      link("üí¨ WhatsApp", "https://wa.me/" + clean, "whatsapp", true);
      link("üì≤ Viber", "viber://chat?number=%2B" + clean, "viber", false);
      link("üü¶ Zalo", "https://zalo.me/" + clean, "zalo", true);
    }

    // Xo√° input khi click v√†o b·∫•t k·ª≥ n√∫t g·ªçi n√†o
    (function () {
      var buttons = document.getElementById("buttons");
      if (!buttons) return;
      buttons.addEventListener("click", function (e) {
        var a = e.target.closest('a');
        if (!a) return;
        var input = document.getElementById("phone");
        if (!input) return;
        setTimeout(function () {
          input.value = "";
          input.dispatchEvent(new Event("input", { bubbles: true }));
        }, 0);
      });
    })();
  </script>
</body>
</html>
