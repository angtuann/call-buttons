<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Call Buttons (Auto)</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    input { padding: 12px; font-size: 16px; width: 320px; border:1px solid #ccc; border-radius:10px; }
    .buttons { margin-top: 20px; }
    a { display:inline-block; margin:6px; padding:12px 20px; border-radius:20px; text-decoration:none; font-weight:bold; color:white; }
    .phone { background:#34a853; } .facetime { background:#0b8043; }
    .whatsapp { background:#25d366; } .viber { background:#665cac; } .zalo { background:#0068ff; }
    .hint { color:#666; font-size:14px; margin-top:8px; }
  </style>
</head>
<body>
  <h2>Generate Call Buttons (Auto)</h2>
  <input id="phone" type="text"
         placeholder="Nháº­p sá»‘: 017142326945, 0912345678, +16266881407"
         autocomplete="off"
         oninput="render(this.value)" />
  <div class="hint">Quy táº¯c: 10 sá»‘ VN â†’ +84..., tá»« 11 sá»‘ trá»Ÿ lÃªn náº¿u báº¯t Ä‘áº§u báº±ng 0 â†’ thay 0 Ä‘áº§u thÃ nh dáº¥u +</div>

  <div id="buttons" class="buttons"></div>

  <script>
    function normalizeNumber(num) {
      num = (num || "").trim();
      if (!num) return "";

      // Giá»¯ nguyÃªn náº¿u Ä‘Ã£ cÃ³ dáº¥u +
      if (num.startsWith("+")) return num;

      // 10 chá»¯ sá»‘ vÃ  báº¯t Ä‘áº§u báº±ng 0 â†’ +84 + pháº§n cÃ²n láº¡i (Viá»‡t Nam)
      if (/^0\d{9}$/.test(num)) {
        return "+84" + num.slice(1);
      }

      // Tá»ª 11 chá»¯ sá»‘ TRá» LÃŠN vÃ  Báº®T Äáº¦U Báº°NG 0 â†’ thay '0' Ä‘áº§u báº±ng '+'
      // VÃ­ dá»¥: 01234567890 â†’ +1234567890  (chá»‰ thay 0 Ä‘áº§u báº±ng '+', KHÃ”NG thÃªm '1' nÃ o)
      if (/^0\d{10,}$/.test(num)) {
        return "+" + num.slice(1);
      }

      // CÃ²n láº¡i giá»¯ nguyÃªn (vd: 84123456789, 10123456789, â€¦)
      return num;
    }

    function render(raw) {
      var box = document.getElementById("buttons");
      var normalized = normalizeNumber(raw);

      // KHÃ”NG xoÃ¡ káº¿t quáº£ cÅ© khi input rá»—ng
      if (!normalized) return;

      var clean = normalized.replace("+", "");

      // Má»—i láº§n render má»›i â†’ thay ná»™i dung (theo logic gá»‘c)
      box.innerHTML = "";

      // Hiá»ƒn thá»‹ sá»‘ chuáº©n hoÃ¡
      var p = document.createElement("p");
      p.innerHTML = "<b>Sá»‘ chuáº©n hÃ³a:</b> " + normalized;
      box.appendChild(p);

      // Helper táº¡o <a>
      function link(text, href, cls, newTab) {
        var a = document.createElement("a");
        a.className = cls;
        a.href = href;
        a.textContent = text;
        if (newTab) { a.target = "_blank"; a.rel = "noopener"; }
        box.appendChild(a);
      }

      link("ğŸ“ Phone", "tel:" + normalized, "phone", false);
      link("ğŸ§ FaceTime", "facetime-audio:" + normalized, "facetime", false);
      link("ğŸ’¬ WhatsApp", "https://wa.me/" + clean, "whatsapp", true);
      link("ğŸ“² Viber", "viber://chat?number=%2B" + clean, "viber", false);
      link("ğŸŸ¦ Zalo", "https://zalo.me/" + clean, "zalo", true);
    }

    // XoÃ¡ input khi click vÃ o báº¥t ká»³ nÃºt gá»i nÃ o, nhÆ°ng váº«n giá»¯ káº¿t quáº£ bÃªn dÆ°á»›i
    (function () {
      var buttons = document.getElementById("buttons");
      if (!buttons) return;
      buttons.addEventListener("click", function (e) {
        var a = e.target.closest('a');
        if (!a) return;
        var input = document.getElementById("phone");
        if (!input) return;
        setTimeout(function () {
          input.value = "";
          // Gá»­i sá»± kiá»‡n input Ä‘á»ƒ render("") nhÆ°ng hÃ m sáº½ return, khÃ´ng xoÃ¡ káº¿t quáº£
          input.dispatchEvent(new Event("input", { bubbles: true }));
        }, 0);
      });
    })();
  </script>
</body>
</html>
